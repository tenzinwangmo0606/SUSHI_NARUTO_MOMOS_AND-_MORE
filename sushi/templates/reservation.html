{% extends "base.html" %}
{% load static %}
{% block title %}Table Reservation – SUSHI NARUTO MOMOS AND MORE{% endblock %}

{% block content %}
<style>
    .fade-in {
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 0.7s ease-out forwards;
    }

    @keyframes fadeInUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .reservation-box {
        max-width: 700px;
        margin: 0 auto;
        padding: 30px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    label {
        font-weight: bold;
        display: block;
        margin-bottom: 5px;
    }

    input {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    input:focus {
        border-color: #ff4d4d;
        box-shadow: 0 0 5px rgba(255, 77, 77, 0.4);
        outline: none;
    }

    input[type="submit"] {
        background-color: #ff4d4d;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
    }

    input[type="submit"]:hover {
        background-color: #e04343;
    }

    /* New visual effect utilities */
    .img-overlay-wrapper {
        position: relative;
        display: inline-block;
        overflow: visible;
        border-radius: 12px;
    }

    .img-overlay-wrapper::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 12px;
        pointer-events: none;
        background: linear-gradient(180deg, rgba(255, 77, 77, 0.08), rgba(0, 0, 0, 0.06));
        mix-blend-mode: multiply;
        opacity: 0;
        transition: opacity .45s ease, transform .45s ease;
        transform: translateY(6px) scale(1.02);
    }

    .img-overlay-wrapper.hovered::after {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    /* Floating subtle motion */
    .float {
        transition: transform 0.8s cubic-bezier(.2, .9, .3, 1);
        will-change: transform;
    }

    .float[data-float="true"] {
        transform-origin: center;
    }

    /* Parallax target */
    [data-parallax] {
        will-change: transform;
        transition: transform .12s linear;
    }

    /* Scroll reveal */
    .reveal {
        opacity: 0;
        transform: translateY(24px);
        transition: opacity .6s ease, transform .6s ease;
        will-change: opacity, transform;
    }

    .reveal.reveal-visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* 3D flip reveal */
    .flip-reveal {
        transform-style: preserve-3d;
        perspective: 1000px;
        transition: transform 0.8s cubic-bezier(.2, .9, .3, 1), opacity .5s ease;
        transform-origin: center;
        opacity: 0;
    }

    .flip-reveal.reveal-visible {
        transform: rotateY(0) translateZ(0);
        opacity: 1;
    }

    .flip-reveal.init {
        transform: rotateY(20deg) translateZ(-20px);
    }

    /* blur reveal */
    .blur-reveal {
        filter: blur(6px);
        transition: filter .6s ease, opacity .6s ease;
        opacity: .85;
    }

    .blur-reveal.reveal-visible {
        filter: blur(0);
        opacity: 1;
    }

    /* small box-shape accent */
    .box-shape {
        border-radius: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06), inset 0 1px 0 rgba(255, 255, 255, 0.4);
        transition: transform .35s ease, box-shadow .35s ease;
    }

    .box-shape:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.12);
    }

    /* subtle highlight for auto-scroll results */
    .highlight {
        animation: highlight-animation 2s ease-out;
    }

    @keyframes highlight-animation {
        0% {
            box-shadow: 0 0 24px rgba(185, 28, 28, 0.26);
        }

        100% {
            box-shadow: none;
        }
    }
</style>
<section class="relative bg-gradient-to-r from-red-50 to-white py-12 mb-8">
    <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
        <div class="w-full md:w-1/2 mb-6 md:mb-0 flex flex-col items-center md:items-start text-center md:text-left">
            <h1 class="text-4xl font-extrabold text-red-700 mb-4">Welcome to SUSHI NARUTO MOMOS AND MORE</h1>
            <p class="text-lg text-gray-700 mb-4">Authentic Japanese cuisine, fresh sushi, and Asian specialties in
                the heart of Allschwil. Dine in, reserve a table, or order for takeaway!</p>
            <a href="{% url 'reservation' %}"
                class="inline-block bg-red-600 text-white px-6 py-2 rounded shadow hover:bg-red-700 transition">Reserve
                a Table</a>
        </div>
        <div class="w-full md:w-1/2 flex justify-center items-center reste">
            <div class="img-overlay-wrapper reveal box-shape" data-role="hero-wrapper">
                <img src="{% static 'images/restaurant_hero.jpg' %}" alt="SUSHI NARUTO MOMOS AND MORE Restaurant"
                    class="restaurant-hero-img rounded-lg shadow-lg w-full max-w-xs sm:max-w-md float" data-float="true"
                    data-parallax="0.18">
            </div>
        </div>
    </div>
</section>

<!-- Hero Section -->
<div class="fade-in flex flex-col md:flex-row items-center mb-10 px-4">
    <img src="{% static 'images/reservation_hero.jpg' %}" alt="Reserve Table  SUSHI NARUTO MOMOS AND MORE"
        class="rounded-lg shadow-lg w-full max-w-xs md:max-w-sm mr-0 md:mr-6 mb-4 md:mb-0">
    <div>
        <h1 class="text-3xl font-bold text-red-700 mb-2">Reserve a Table</h1>
        <p class="text-lg text-gray-700">Call us at <strong>+41 61 506 41 23</strong> or fill out the form below to book
            your table. We look forward to welcoming you!</p>
    </div>
</div>

<!-- Additional Text -->
<div class="fade-in text-center px-4 md:px-20 mb-8">
    <p class="text-gray-700 text-lg">
        Whether you're planning a romantic evening, a family gathering, or a business lunch, reserving in advance helps
        us serve you better. Choose your preferred time and date, and we’ll take care of the rest.
    </p>
    <p class="text-gray-600 mt-4">
        Our team will send you a confirmation email shortly after your reservation is submitted. Please note that
        reservations are held for 15 minutes after the selected time.
    </p>
</div>

<!-- Image Cards Section (6 Cards) -->

<div class="fade-in grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4 md:px-20 mb-12">
    <!-- Card 1 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/int2.jpg' %}" alt="Private Dining"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Private Dining</h3>
            <p class="text-gray-600 text-sm mt-2">Reserve a quiet, elegant space for your special event.</p>
        </div>
    </div>

    <!-- Card 2 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/int4.jpg' %}" alt="Family Friendly"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Family Friendly</h3>
            <p class="text-gray-600 text-sm mt-2">We have spacious seating and options for all ages.</p>
        </div>
    </div>

    <!-- Card 3 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/reservation_hero.jpg' %}" alt="Business Lunch"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Business Lunch</h3>
            <p class="text-gray-600 text-sm mt-2">Perfect setting for professional meetings and meals.</p>
        </div>
    </div>

    <!-- Card 4 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/restrant_hero.jpg' %}" alt="Romantic Evenings"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Romantic Evenings</h3>
            <p class="text-gray-600 text-sm mt-2">Candle-lit dinners with a serene and cozy ambiance.</p>
        </div>
    </div>

    <!-- Card 5 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/reservation_hero.jpg' %}" alt="Chef Specials"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Chef’s Specials</h3>
            <p class="text-gray-600 text-sm mt-2">Reserve and get a taste of our limited-time dishes.</p>
        </div>
    </div>

    <!-- Card 6 -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="{% static 'images/restrant_hero.jpg' %}" alt="Outdoor Seating"
            class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300">
        <div class="p-4">
            <h3 class="text-xl font-semibold text-red-700">Outdoor Seating</h3>
            <p class="text-gray-600 text-sm mt-2">Enjoy sushi in the open air with our patio seating.</p>
        </div>
    </div>
</div>

<!-- Confirmation Message -->
{% if reservation_success %}
<div class="fade-in bg-green-100 border-l-4 border-green-400 p-4 mb-6 text-green-800 text-center max-w-xl mx-auto">
    Thank you for your reservation! We will confirm by email soon.
</div>
{% endif %}

<!-- Reservation Form -->
<div class="fade-in px-4">
    <div class="reservation-box blur-reveal flip-reveal init box-shape reveal">
        <form method="post">
            {% csrf_token %}
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>

            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="time">Time:</label>
            <input type="time" id="time" name="time" required>

            <label for="guests">Number of People:</label>
            <input type="number" id="guests" name="guests" min="1" required>

            <input type="submit" value="Reserve">
        </form>
    </div>
</div>


<script>
    // Get today's date in YYYY-MM-DD format
    const today = new Date().toISOString().split('T')[0];
    document.getElementById("date").setAttribute("min", today);

    // Small modular scroll/parallax/reveal driver
    (function () {
        const revealed = new WeakSet();
        // IntersectionObserver for reveal/flip/blur
        const obs = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const el = entry.target;
                if (entry.isIntersecting) {
                    el.classList.add('reveal-visible');
                    revealed.add(el);
                } else {
                    // keep revealed items visible; for hide-on-scroll-up toggle remove if wanted
                }
            });
        }, { threshold: 0.12 });

        document.querySelectorAll('.reveal, .flip-reveal, .blur-reveal, .img-overlay-wrapper').forEach(el => obs.observe(el));

        // Parallax on scroll (simple, throttled)
        let lastY = window.scrollY;
        let ticking = false;

        function onScroll() {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const dy = window.scrollY;
                    // hide/show top wrapper (optional demonstration)
                    const heroWrapper = document.querySelector('[data-role="hero-wrapper"]');
                    if (heroWrapper) {
                        if (dy > lastY + 10) heroWrapper.style.opacity = '0.92'; // scrolling down
                        else if (dy < lastY - 10) heroWrapper.style.opacity = '1'; // scrolling up
                    }
                    document.querySelectorAll('[data-parallax]').forEach(el => {
                        const depth = parseFloat(el.getAttribute('data-parallax')) || 0.1;
                        const rect = el.getBoundingClientRect();
                        const winH = window.innerHeight;
                        // center-based parallax
                        const offset = ((rect.top + rect.height / 2) - winH / 2) * -depth;
                        el.style.transform = `translate3d(0, ${offset}px, 0)`;
                    });
                    ticking = false;
                    lastY = dy;
                });
                ticking = true;
            }
        }

        window.addEventListener('scroll', onScroll, { passive: true });
        // small hover effect for wrappers
        document.querySelectorAll('.img-overlay-wrapper').forEach(w => {
            w.addEventListener('mouseenter', () => w.classList.add('hovered'));
            w.addEventListener('mouseleave', () => w.classList.remove('hovered'));
        });
    })();
</script>

{% endblock %}